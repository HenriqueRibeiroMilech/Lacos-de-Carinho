<div class="min-h-screen bg-gradient-to-br from-rose-50 via-white to-pink-50 flex items-center justify-center p-4">

  <!-- Checking State -->
  @if(status === 'checking') {
  <div class="text-center">
    <div
      class="w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-r from-[#D97F97] to-[#c06f85] flex items-center justify-center animate-pulse">
      <svg class="w-10 h-10 text-white animate-spin" fill="none" viewBox="0 0 24 24">
        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor"
          d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
        </path>
      </svg>
    </div>
    <h2 class="text-xl font-semibold text-gray-700">Verificando pagamento...</h2>
    <p class="text-gray-500 mt-2">Aguarde um momento</p>
  </div>
  }

  <!-- Approved State (pagamento j√° foi aprovado!) -->
  @if(status === 'approved') {
  <div class="bg-white rounded-3xl shadow-2xl p-8 md:p-12 max-w-lg w-full text-center">
    <div
      class="w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 flex items-center justify-center shadow-lg shadow-green-200">
      <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
      </svg>
    </div>

    <div class="text-5xl mb-4">üéâ</div>

    <h1 class="text-3xl font-bold text-gray-800 mb-2">Pagamento Aprovado!</h1>

    @if(userName) {
    <p class="text-lg text-gray-600 mb-4">
      Parab√©ns, <span class="font-semibold text-[#D97F97]">{{ userName }}</span>!
    </p>
    }

    @if(tokenUpdated) {
    <p class="text-gray-500 mb-8">
      Seu plano de Organizador foi ativado com sucesso! Agora voc√™ pode criar suas listas e organizar cada detalhe do
      seu grande dia.
    </p>

    <button (click)="goToDashboard()"
      class="w-full py-4 bg-gradient-to-r from-[#D97F97] to-[#c06f85] text-white rounded-2xl font-semibold shadow-lg shadow-rose-200 hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300">
      Ir para o Painel
    </button>
    } @else {
    <p class="text-gray-500 mb-8">
      Seu cadastro foi confirmado com sucesso. Fa√ßa login para come√ßar a criar suas listas!
    </p>

    <button (click)="logoutAndRedirect()"
      class="w-full py-4 bg-gradient-to-r from-[#D97F97] to-[#c06f85] text-white rounded-2xl font-semibold shadow-lg shadow-rose-200 hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300">
      Fazer Login
    </button>
    }
  </div>
  }

  <!-- Pending State (ainda aguardando) -->
  @if(status === 'pending') {
  <div class="bg-white rounded-3xl shadow-2xl p-8 md:p-12 max-w-lg w-full text-center">
    <div
      class="w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-r from-amber-400 to-orange-500 flex items-center justify-center shadow-lg shadow-amber-200">
      <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
    </div>

    <div class="text-5xl mb-4">‚è≥</div>

    <h1 class="text-3xl font-bold text-gray-800 mb-2">Pagamento em processamento</h1>

    <p class="text-gray-500 mb-6">
      Seu pagamento est√° sendo processado. Assim que for confirmado, voc√™ receber√° um email.
    </p>

    @if(isPolling) {
    <div class="flex items-center justify-center gap-2 text-sm text-gray-500 mb-6">
      <span class="relative flex h-3 w-3">
        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
        <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
      </span>
      <span>Verificando automaticamente...</span>
    </div>
    }

    <p class="text-gray-600 mb-8 text-sm">
      Assim que seu pagamento for aprovado, fa√ßa login para come√ßar a criar suas listas e organizar seu casamento.
    </p>

    <button (click)="logoutAndRedirect()"
      class="w-full py-4 bg-gradient-to-r from-[#D97F97] to-[#c06f85] text-white rounded-2xl font-semibold shadow-lg shadow-rose-200 hover:shadow-xl hover:-translate-y-0.5 transition-all duration-300">
      Fazer Login
    </button>

    <p class="text-sm text-gray-400 mt-8">
      D√∫vidas? Entre em contato:<br>
      <a href="mailto:lacosdecarinhosuporte@gmail.com"
        class="text-[#D97F97] hover:underline">lacosdecarinhosuporte&#64;gmail.com</a>
    </p>
  </div>
  }

</div>